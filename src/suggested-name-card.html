<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="suggested-name-card">
  <!-- Defines the element's style and local DOM -->
  <template>
    <iron-ajax
      id="nameRequest"
      auto
      url="http://www.behindthename.com/api/random.php?usage=eng&key=an468794&number=1"
      handle-as="document"
      on-response="putName"
      items={{last-response}}
      debounce-duration="300"></iron-ajax>
      <paper-card id="nameCard">
        <div class="card-content">

        </div>
        <div class="card-actions" >

          <paper-button on-click="sendToMaybe">Yes</paper-button>
          <paper-button on-click="sendToReject">No</paper-button>

        </div>
      </paper-card>

  </template>
  <!-- Creates the element's prototype and registers it -->
  <script>
    Polymer({
      is: 'suggested-name-card',
      putName: function(r) {
        resp = r.detail.response;
        list = resp.querySelectorAll('name');
        this.$.nameCard.heading = list[0].innerHTML;
      },
      sendToMaybe: function() {
        this.$.nameRequest.generateRequest();
      },
      sendToReject: function() {
        this.$.nameRequest.generateRequest();
      }
    });
  </script>
</dom-module>
